# 页表与内存管理

重点实现了健壮的内存管理与 Sv39 虚拟内存机制。

## 主要特性

*   **物理内存管理**: 基于空闲链表的高效页帧分配器。
*   **虚拟内存系统**: 完整实现了 RISC-V Sv39 三级页表分页。
*   **内核地址空间**: 为内核建立了独立且受保护的地址空间。
*   **内置测试套件**: 包含了用于验证核心功能正确性的单元测试。

### 环境依赖

*   RISC-V 交叉编译工具链 (例如 `riscv64-unknown-elf-gcc`)
*   QEMU 模拟器 (需支持 `qemu-system-riscv64`)

### 编译与运行

1.  **克隆本仓库**
    
    ```sh
    git clone <仓库链接>
    cd <仓库名称>
    ```
    
2.  **编译内核**
    
    ```sh
    make
    ```
    
3.  **在 QEMU 中启动内核**
    ```sh
    make qemu
    ```
    运行后，您将看到内存管理测试的输出结果。

4.  **清理编译文件**
    ```sh
    make clean
    ```

## 运行结果

递归产生了 32768 个页表项，把**每一个**有效的叶子（LEAF）映射关系都打印出来。会出现很多很长的映射关系。

## 详细文档

本项目包含一份详细的 **[实验报告 (report.md)](report.md)** ，其中记录了：

*   各个模块（物理内存、页表管理等）的设计思路与实现细节。
*   一次经典的“重复释放” Bug 的完整分析与调试过程。

如果您想深入了解本项目的技术细节和开发历程，强烈建议阅读该报告。

## 项目结构

```
.
├── kernel/
│   ├── vm.c             # 虚拟内存与页表管理核心代码
│   ├── kmem.c           # 物理页帧分配器
│   ├── entry.S          # 内核入口与启动栈设置
│   ├── kernel.ld        # 链接器脚本，定义内存布局
│   └── ...              # 其他内核源文件
├── Makefile             # 项目构建脚本
├── README.md            # 本说明文件
└── REPORT.md            # 详细的实验报告
```


